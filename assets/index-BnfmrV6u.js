import{a,j as e,e as n,p as w}from"./index-Ck20Llzm.js";import{P}from"./Page-CnAvShAv.js";import{u as S}from"./useSmartContract-B8A2IuNF.js";function b(){const{address:l,getChildren:o}=S(),[s,c]=a.useState(null),[d,u]=a.useState([]),[h,y]=a.useState(!0),[g,j]=a.useState(""),[v,A]=a.useState(""),[i,f]=a.useState(1);return a.useEffect(()=>{let r=!0;return(async()=>{if(!l)return;const p=s||l;try{const t=await o(p);if(!r)return;const m=Array.isArray(t.children)?t.children:[],N=Array.isArray(t.affiliates)?t.affiliates[0]:p,L=Array.isArray(t.affiliates)?t.affiliates[2]:0;console.log(m),u(m),j(N),A(L)}catch(t){r&&console.error("Failed to fetch affiliate data:",t)}finally{r&&y(!1)}})(),()=>{r=!1}},[l,s,o]),e.jsx(P,{title:"Network Tree",children:e.jsxs("div",{className:"max-w-xs p-10",children:[e.jsxs(n,{color:"primary",children:["Level ",i]}),e.jsx("div",{className:"d-flex flex-column flex-row-fluid gap-2 m-2",children:e.jsxs("div",{className:"btn btn-primary w-100 mb-3",style:{textAlign:"left",padding:"0px"},children:[e.jsx(n,{color:"error",className:"rounded-full me-1",onClick:()=>{l!=s&&s!=null&&i>1&&(c(g),f(i-1))},children:v}),e.jsx(n,{children:s||l})]})}),h?e.jsx("p",{children:"Loading..."}):d.length===0?e.jsx("p",{children:"No direct found."}):e.jsx("div",{className:"d-flex flex-column flex-row-fluid gap-2 m-2 w-100",children:d.map((r,x)=>e.jsxs("div",{className:"d-flex flex-column mb-3",style:{textAlign:"left",padding:"0px"},children:[e.jsx(n,{color:r.address==r.broker?"info":"primary",className:"me-1",onClick:()=>{s!=r.address&&(c(r.address),f(i+1))},children:r.level}),e.jsx(n,{children:r.address})]},x))})]})})}b.propTypes={tree:w.PropTypes.array};export{b as default};
