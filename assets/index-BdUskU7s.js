import{a as s,P as B,h as O,e as P,j as e,I as q,k as z,B as M}from"./index-CigXKlsO.js";import{P as U}from"./Page-DeG-ew4O.js";import{u as L}from"./useSmartContract-BsQctCR-.js";import{u as $}from"./index.esm-BHvjKwUg.js";import{C as H}from"./ConfirmModal-Cak9Oy4N.js";import{F as G}from"./ExclamationTriangleIcon-6BGNY-Yf.js";import"./transition-CAxvt4b0.js";import"./dialog-D_A4DOm0.js";function D({children:p,wait:a=300}){const[x,i]=s.useState(!1);if(s.useEffect(()=>{const h=setTimeout(()=>{i(!0)},a);return()=>clearTimeout(h)},[a]),!p)throw new Error("No children provided");return x?p:null}D.propTypes={children:B.node,wait:B.number};function de(){const p=O(),{address:a,usdtBalance:x,rewardsBalance:i,affiliateData:h,registrationFee:S,upgradeAmount:c,lastCallTime:E,registerWallet:g,activateWithDeposit:C,activateWithWallet:k}=L(),T=h.parent!="0x0000000000000000000000000000000000000000",d=c,[A,j]=s.useState(a),[w,m]=s.useState(""),[u,y]=s.useState(""),[o,{open:W,close:R}]=P(!1),[F,l]=s.useState(!1),[I,f]=s.useState(!1),[b,n]=s.useState(!1),[N,r]=s.useState(!1),[v,J]=s.useState("register"),V=b?"error":I?"success":"pending",K={pending:{Icon:G,title:" Send request ",description:"Click ok to confirm request.",actionText:"Ok"},success:{title:"Request Processing",description:"Activation Completed"},error:{description:N.length>0?`${N}`:"Ensure internet is on and retry. Contact support if issue remains."}};s.useEffect(()=>{async function t(){j(a),m(w),y(u),J(v),o==!1&&l(!1)}t()},[o,a,v,u,w]);var Q=Math.floor(Date.now()/1e3);const X=async()=>{if(l(!0),Q<parseInt(E)+60){r("60 Seconds CoolDown. Try Again Later"),l(!1),f(!1),n(!0);return}var t=!1;if(v=="register"){if(parseFloat(x)<10){r("You must have at least 10 USDT"),l(!1),f(!1),n(!0);return}t=await g(w),t||r("Failed to register")}if(v=="activatebyusdt"&&(t=await C(),t||r("Failed to deposit")),v=="activatebywallet"){if(parseFloat(i)<parseFloat(d)){r(`You must have at least ${i} < ${d} USDT `),l(!1),f(!1),n(!0);return}t=await k(),t||r("Failed to deduct balance")}t==!0?(l(!1),f(!0),n(!1),p("/dashboards")):(l(!1),n(!0))},{register:Z,handleSubmit:_,formState:{errors:Y}}=$(),ee={referralWallet:{required:"Referral wallet is required",pattern:{value:/^0x[a-fA-F0-9]{40}$/i,message:"Invalid Wallet Address"}}},se=async t=>{console.log(t),m(t.referralWallet),f(!1),n(!1),W()};return e.jsxs(U,{title:"Join and Activate",children:[e.jsx("div",{className:"transition-content w-full px-(--margin-x) pt-5 lg:pt-6",children:e.jsx(D,{wait:500,children:T?e.jsx("div",{children:"Already Registered"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5 text-gray-100 dark:text-dark-100",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-500 to-primary-600 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium",children:" Register Your Account  "}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsxs("div",{className:"mt-4 text-s font-medium text-gray-100 dark:text-dark-100 ",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Info: "})," Register your wallet to join our community."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"About: "}),"You will create an account, network, and wallet."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Benefits: "}),"You will get the privillege to earn rewards by joining the programs."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Requirements: "}),"To register you need a wallet address and valid sponsor."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fees:"})," You need ",S," USDT and enough BNB balance for registrations."]})]})}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5"})]})}),e.jsx("div",{className:"card mt-5 mb-10 p-5",children:e.jsxs("form",{onSubmit:_(se),autoComplete:"off",children:[e.jsx("div",{className:"w-full mb-5",children:e.jsx(q,{name:"yourwalletaddress",label:"Your Wallet Address",placeholder:"Enter Wallet Address",value:A||"",description:"Your recognize wallet address.",onChange:t=>j(t.target.value),readOnly:!0})}),e.jsx("div",{className:"w-full mb-5",children:e.jsx(q,{name:"referralWallet",label:"Referral Wallet",placeholder:"Enter Wallet Address",description:"Referral Wallet Address.",onChange:t=>{m(t.target.value)},...Z("referralWallet",ee.referralWallet),error:Y?.referralWallet&&Y.referralWallet.message})}),e.jsx("div",{className:"mt-2",children:e.jsx(z,{when:u&&u?.message!=="",children:u})}),e.jsx("div",{className:"w-full",children:e.jsx(M,{type:"submit",className:"mt-5 w-full",color:"primary",children:"REGISTER"})})]})})]})})}),e.jsx(H,{show:o,onClose:R,messages:K,onOk:X,confirmLoading:F,state:V})]})}function me(){const p=O(),{address:a,brokerFee:x,WNTradesContract:i,activateBroker:h,convertWeiToEther:S}=L(),[c,E]=s.useState(""),[g,{open:C,close:k}]=P(!1),[T,d]=s.useState(!1),[A,j]=s.useState(!1),[w,m]=s.useState(!1),[u,y]=s.useState(!1),[o,W]=s.useState([]),R=w?"error":A?"success":"pending",F={pending:{Icon:G,title:" Send request ",description:"Click ok to confirm request.",actionText:"Ok"},success:{title:"Request Processing",description:"Activation Completed"},error:{description:`${u} Ensure internet is on and retry. Contact support if issue remains.`}};s.useEffect(()=>{async function r(){a!=="0x0000000000000000000000000000000000000000"&&i&&W(await i.brokers(a)),E(c),g==!1&&d(!1)}r()},[a,g,c,i]);const l=async()=>{d(!0);var r=!1;r=await h(),r||y("Failed to register"),r==!0?(y("Registered Complete"),d(!1),j(!0),m(!1),p("/dashboards/broker")):(d(!1),m(!0))},{register:I,handleSubmit:f,formState:{errors:b}}=$(),n=async()=>{console.log("on submit:"),j(!1),m(!1),C()},N={yourwalletaddress:{required:"Your wallet is required"}};return e.jsxs(U,{title:"Merchant Program",children:[e.jsxs("div",{className:"m-5",children:[e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Country Head"}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"Enjoy all deposits under your organizations"})})]})}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-2 sm:px-5",children:[e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Requirements"}),e.jsxs("div",{className:"flex items-end justify-between space-x-2 ",children:[e.jsxs("p",{className:"mt-4 text-s font-medium text-white",children:[S(x)," USDT"]}),e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"Rank 10"})]}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5",children:e.jsx("span",{className:"text-2xl",children:"1"})})]}),e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Country Head Incentives"}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"The country head will get 5% of the deposit and activation of accounts."})}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5",children:e.jsx("span",{className:"text-2xl",children:"2"})})]})]})]}),e.jsx("div",{className:"card mb-10 p-5",children:e.jsx(D,{wait:2e3,children:o.isActive?e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"MERCHANT STATUS"}),e.jsxs("p",{className:"uppercase font-medium text-white",children:["Merchant Fees: ",parseFloat(o.fees)/100," %  "]}),e.jsxs("p",{className:"uppercase font-medium text-white",children:["Total Income: ",parseFloat(o.totalIncome)," "]})]})})}):e.jsxs("form",{onSubmit:f(n),autoComplete:"off",children:[e.jsx("div",{className:"w-full mb-5",children:e.jsx(q,{name:"yourwalletaddress",label:"Your Wallet Address!",placeholder:"Enter Wallet Address",value:a||"",description:"Your recognize wallet address.",readOnly:!0,...I("yourwalletaddress",N.yourwalletaddress),error:b?.yourwalletaddress&&b.yourwalletaddress.message})}),e.jsx("div",{className:"mt-2",children:e.jsx(z,{when:c&&c?.message!=="",children:c})}),e.jsx("div",{className:"w-full",children:e.jsxs(M,{type:"submit",className:"mt-5 w-full",color:"primary",children:["ACTIVATE [",o.fees,"]"]})})]})})}),e.jsx(H,{show:g,onClose:k,messages:F,onOk:l,confirmLoading:T,state:R})]})}export{me as Broker,de as default};
