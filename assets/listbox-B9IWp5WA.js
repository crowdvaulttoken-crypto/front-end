import{s as be,F as Xe,b as Ze,$ as Je,a as et,w as tt,e as nt,y as ot,R as rt,T as it,c as lt,A as st}from"./floating-Co8zr8-F.js";import{a as s,ac as Y,R as x}from"./index-BPlWD8VV.js";import{o as C,p as ke,g as Ce,m as at,h as Pe,Y as q,a as we,y as K,n as oe,L as ut,k as me,l as ct,b as U,c as G,q as he,r as dt,x as pt,z as Le,B as Te,C as ft,D as pe,u as H,E as Fe,F as vt,G as bt,I as mt,S as L,w as ht,V as De,J as ge,N as gt,P as xt,Q as Ot,R as St,U as yt,e as $t,W as Et,X as It,s as Rt,Z as kt,_ as Ct,$ as re,i as xe,d as E,a0 as Pt,T as Oe,a1 as wt,a2 as Lt}from"./transition-DIQgx8rl.js";function Tt(e,n,t){let[o,r]=s.useState(t),i=e!==void 0,l=s.useRef(i),c=s.useRef(!1),u=s.useRef(!1);return i&&!l.current&&!c.current?(c.current=!0,l.current=i,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!i&&l.current&&!u.current&&(u.current=!0,l.current=i,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[i?e:o,C(d=>(i||Y.flushSync(()=>r(d)),n?.(d)))]}function Ft(e){let[n]=s.useState(e);return n}function Me(e={},n=null,t=[]){for(let[o,r]of Object.entries(e))Ne(t,Ae(n,o),r);return t}function Ae(e,n){return e?e+"["+n+"]":n}function Ne(e,n,t){if(Array.isArray(t))for(let[o,r]of t.entries())Ne(e,Ae(n,o.toString()),r);else t instanceof Date?e.push([n,t.toISOString()]):typeof t=="boolean"?e.push([n,t?"1":"0"]):typeof t=="string"?e.push([n,t]):typeof t=="number"?e.push([n,`${t}`]):t==null?e.push([n,""]):Mt(t)&&!s.isValidElement(t)&&Me(t,n,e)}function Dt(e){var n,t;let o=(n=e?.form)!=null?n:e.closest("form");if(o){for(let r of o.elements)if(r!==e&&(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image")){r.click();return}(t=o.requestSubmit)==null||t.call(o)}}function Mt(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let n=Object.getPrototypeOf(e);return n===null||Object.getPrototypeOf(n)===null}let At=s.createContext(null);function Nt({children:e}){let n=s.useContext(At);if(!n)return x.createElement(x.Fragment,null,e);let{target:t}=n;return t?Y.createPortal(x.createElement(x.Fragment,null,e),t):null}function _t({data:e,form:n,disabled:t,onReset:o,overrides:r}){let[i,l]=s.useState(null),c=ke();return s.useEffect(()=>{if(o&&i)return c.addEventListener(i,"reset",o)},[i,n,o]),x.createElement(Nt,null,x.createElement(Bt,{setForm:l,formId:n}),Me(e).map(([u,d])=>x.createElement(Ce,{features:Pe.Hidden,...at({key:u,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:n,disabled:t,name:u,value:d,...r})})))}function Bt({setForm:e,formId:n}){return s.useEffect(()=>{if(n){let t=document.getElementById(n);t&&e(t)}},[e,n]),n?null:x.createElement(Ce,{features:Pe.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let o=t.closest("form");o&&e(o)}})}let Vt=s.createContext(void 0);function _e(){return s.useContext(Vt)}let ie=s.createContext(null);ie.displayName="LabelContext";function Be(){let e=s.useContext(ie);if(e===null){let n=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,Be),n}return e}function Ve(e){var n,t,o;let r=(t=(n=s.useContext(ie))==null?void 0:n.value)!=null?t:void 0;return((o=e?.length)!=null?o:0)>0?[r,...e].filter(Boolean).join(" "):r}function jt({inherit:e=!1}={}){let n=Ve(),[t,o]=s.useState([]),r=e?[n,...t].filter(Boolean):t;return[r.length>0?r.join(" "):void 0,s.useMemo(()=>function(i){let l=C(u=>(o(d=>[...d,u]),()=>o(d=>{let v=d.slice(),m=v.indexOf(u);return m!==-1&&v.splice(m,1),v}))),c=s.useMemo(()=>({register:l,slot:i.slot,name:i.name,props:i.props,value:i.value}),[l,i.slot,i.name,i.props,i.value]);return x.createElement(ie.Provider,{value:c},i.children)},[o])]}let zt="label";function Ut(e,n){var t;let o=s.useId(),r=Be(),i=_e(),l=we(),{id:c=`headlessui-label-${o}`,htmlFor:u=i??((t=r.props)==null?void 0:t.htmlFor),passive:d=!1,...v}=e,m=K(n);oe(()=>r.register(c),[c,r.register]);let f=C(y=>{let I=y.currentTarget;if(!(y.target!==y.currentTarget&&ut(y.target))&&(me(I)&&y.preventDefault(),r.props&&"onClick"in r.props&&typeof r.props.onClick=="function"&&r.props.onClick(y),me(I))){let S=document.getElementById(I.htmlFor);if(S){let P=S.getAttribute("disabled");if(P==="true"||P==="")return;let $=S.getAttribute("aria-disabled");if($==="true"||$==="")return;(ct(S)&&(S.type==="file"||S.type==="radio"||S.type==="checkbox")||S.role==="radio"||S.role==="checkbox"||S.role==="switch")&&S.click(),S.focus({preventScroll:!0})}}}),a=U({...r.slot,disabled:l||!1}),g={ref:m,...r.props,id:c,htmlFor:u,onClick:f};return d&&("onClick"in g&&(delete g.htmlFor,delete g.onClick),"onClick"in v&&delete v.onClick),G()({ourProps:g,theirProps:v,slot:a,defaultTag:u?zt:"div",name:r.name||"Label"})}let Qt=q(Ut),Ht=Object.assign(Qt,{});function qt(e,n){return e!==null&&n!==null&&typeof e=="object"&&typeof n=="object"&&"id"in e&&"id"in n?e.id===n.id:e===n}function Kt(e=qt){return s.useCallback((n,t)=>{if(typeof e=="string"){let o=e;return n?.[o]===t?.[o]}return e(n,t)},[e])}var je=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(je||{});function Gt(e){let n=s.useRef(null),t=C(r=>{n.current=r.pointerType,!be(r.currentTarget)&&r.pointerType==="mouse"&&r.button===je.Left&&(r.preventDefault(),e(r))}),o=C(r=>{n.current!=="mouse"&&(be(r.currentTarget)||e(r))});return{onPointerDown:t,onClick:o}}var Wt=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(Wt||{});const J={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},Yt=200,Se=5;function Xt(e,{trigger:n,action:t,close:o,select:r}){let i=s.useRef(null),l=s.useRef(null),c=s.useRef(null);he(e&&n!==null,"pointerdown",u=>{dt(u?.target)&&n!=null&&n.contains(u.target)&&(l.current=u.x,c.current=u.y,i.current=u.timeStamp)}),he(e&&n!==null,"pointerup",u=>{var d,v;let m=i.current;if(m===null||(i.current=null,!pt(u.target))||Math.abs(u.x-((d=l.current)!=null?d:u.x))<Se&&Math.abs(u.y-((v=c.current)!=null?v:u.y))<Se)return;let f=t(u);switch(f.kind){case 0:return;case 1:{u.timeStamp-m>Yt&&(r(f.target),o());break}case 2:{o();break}}},{capture:!0})}function ye(e){return[e.screenX,e.screenY]}function Zt(){let e=s.useRef([-1,-1]);return{wasMoved(n){let t=ye(n);return e.current[0]===t[0]&&e.current[1]===t[1]?!1:(e.current=t,!0)},update(n){e.current=ye(n)}}}function Jt({children:e,freeze:n},t){let o=ze(n,e);return s.isValidElement(o)?s.cloneElement(o,{ref:t}):x.createElement(x.Fragment,null,o)}x.forwardRef(Jt);function ze(e,n){let[t,o]=s.useState(n);return!e&&t!==n&&o(n),e?t:n}function en(e){throw new Error("Unexpected object: "+e)}var O=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(O||{});function ee(e,n){let t=n.resolveItems();if(t.length<=0)return null;let o=n.resolveActiveIndex(),r=o??-1;switch(e.focus){case 0:{for(let i=0;i<t.length;++i)if(!n.resolveDisabled(t[i],i,t))return i;return o}case 1:{r===-1&&(r=t.length);for(let i=r-1;i>=0;--i)if(!n.resolveDisabled(t[i],i,t))return i;return o}case 2:{for(let i=r+1;i<t.length;++i)if(!n.resolveDisabled(t[i],i,t))return i;return o}case 3:{for(let i=t.length-1;i>=0;--i)if(!n.resolveDisabled(t[i],i,t))return i;return o}case 4:{for(let i=0;i<t.length;++i)if(n.resolveId(t[i],i,t)===e.id)return i;return o}case 5:return null;default:en(e)}}const te={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function Ue(e){let n=e.getBoundingClientRect();return`${n.x},${n.y}`}function tn(e,n,t){let o=Le();if(n.kind==="Tracked"){let r=function(){i!==Ue(e)&&(o.dispose(),t())},{position:i}=n,l=new ResizeObserver(r);l.observe(e),o.add(()=>l.disconnect()),o.addEventListener(window,"scroll",r,{passive:!0}),o.addEventListener(window,"resize",r)}return()=>o.dispose()}let $e=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Ee(e){var n,t;let o=(n=e.innerText)!=null?n:"",r=e.cloneNode(!0);if(!Te(r))return o;let i=!1;for(let c of r.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),i=!0;let l=i?(t=r.innerText)!=null?t:"":o;return $e.test(l)&&(l=l.replace($e,"")),l}function nn(e){let n=e.getAttribute("aria-label");if(typeof n=="string")return n.trim();let t=e.getAttribute("aria-labelledby");if(t){let o=t.split(" ").map(r=>{let i=document.getElementById(r);if(i){let l=i.getAttribute("aria-label");return typeof l=="string"?l.trim():Ee(i).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return Ee(e).trim()}function on(e){let n=s.useRef(""),t=s.useRef("");return C(()=>{let o=e.current;if(!o)return"";let r=o.innerText;if(n.current===r)return t.current;let i=nn(o).trim().toLowerCase();return n.current=r,t.current=i,i})}var rn=Object.defineProperty,ln=(e,n,t)=>n in e?rn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Ie=(e,n,t)=>(ln(e,typeof n!="symbol"?n+"":n,t),t),R=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(R||{}),V=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(V||{}),ne=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ne||{}),Qe=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.SelectOption=5]="SelectOption",e[e.RegisterOptions=6]="RegisterOptions",e[e.UnregisterOptions=7]="UnregisterOptions",e[e.SetButtonElement=8]="SetButtonElement",e[e.SetOptionsElement=9]="SetOptionsElement",e[e.SortOptions=10]="SortOptions",e[e.MarkButtonAsMoved=11]="MarkButtonAsMoved",e))(Qe||{});function Re(e,n=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,o=bt(n(e.options.slice()),i=>i.dataRef.current.domRef.current),r=t?o.indexOf(t):null;return r===-1&&(r=null),{options:o,activeOptionIndex:r}}let sn={1(e){if(e.dataRef.current.disabled||e.listboxState===1)return e;let n=e.buttonElement?te.Tracked(Ue(e.buttonElement)):e.buttonPositionState;return{...e,activeOptionIndex:null,pendingFocus:{focus:O.Nothing},listboxState:1,__demoMode:!1,buttonPositionState:n}},0(e,n){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:o}=e.dataRef.current,r=e.options.findIndex(i=>o(i.dataRef.current.value));return r!==-1&&(t=r),{...e,frozenValue:!1,pendingFocus:n.focus,listboxState:0,activeOptionIndex:t,__demoMode:!1,buttonPositionState:te.Idle}},2(e,n){var t,o,r,i,l;if(e.dataRef.current.disabled||e.listboxState===1)return e;let c={...e,searchQuery:"",activationTrigger:(t=n.trigger)!=null?t:1,__demoMode:!1};if(n.focus===O.Nothing)return{...c,activeOptionIndex:null};if(n.focus===O.Specific)return{...c,activeOptionIndex:e.options.findIndex(v=>v.id===n.id)};if(n.focus===O.Previous){let v=e.activeOptionIndex;if(v!==null){let m=e.options[v].dataRef.current.domRef,f=ee(n,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});if(f!==null){let a=e.options[f].dataRef.current.domRef;if(((o=m.current)==null?void 0:o.previousElementSibling)===a.current||((r=a.current)==null?void 0:r.previousElementSibling)===null)return{...c,activeOptionIndex:f}}}}else if(n.focus===O.Next){let v=e.activeOptionIndex;if(v!==null){let m=e.options[v].dataRef.current.domRef,f=ee(n,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});if(f!==null){let a=e.options[f].dataRef.current.domRef;if(((i=m.current)==null?void 0:i.nextElementSibling)===a.current||((l=a.current)==null?void 0:l.nextElementSibling)===null)return{...c,activeOptionIndex:f}}}}let u=Re(e),d=ee(n,{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:v=>v.id,resolveDisabled:v=>v.dataRef.current.disabled});return{...c,...u,activeOptionIndex:d}},3:(e,n)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let t=e.searchQuery!==""?0:1,o=e.searchQuery+n.value.toLowerCase(),r=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+t).concat(e.options.slice(0,e.activeOptionIndex+t)):e.options).find(l=>{var c;return!l.dataRef.current.disabled&&((c=l.dataRef.current.textValue)==null?void 0:c.startsWith(o))}),i=r?e.options.indexOf(r):-1;return i===-1||i===e.activeOptionIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeOptionIndex:i,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5(e){return e.dataRef.current.mode===0?{...e,frozenValue:!0}:{...e}},6:(e,n)=>{let t=e.options.concat(n.options),o=e.activeOptionIndex;if(e.pendingFocus.focus!==O.Nothing&&(o=ee(e.pendingFocus,{resolveItems:()=>t,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled})),e.activeOptionIndex===null){let{isSelected:r}=e.dataRef.current;if(r){let i=t.findIndex(l=>r?.(l.dataRef.current.value));i!==-1&&(o=i)}}return{...e,options:t,activeOptionIndex:o,pendingFocus:{focus:O.Nothing},pendingShouldSort:!0}},7:(e,n)=>{let t=e.options,o=[],r=new Set(n.options);for(let[i,l]of t.entries())if(r.has(l.id)&&(o.push(i),r.delete(l.id),r.size===0))break;if(o.length>0){t=t.slice();for(let i of o.reverse())t.splice(i,1)}return{...e,options:t,activationTrigger:1}},8:(e,n)=>e.buttonElement===n.element?e:{...e,buttonElement:n.element},9:(e,n)=>e.optionsElement===n.element?e:{...e,optionsElement:n.element},10:e=>e.pendingShouldSort?{...e,...Re(e),pendingShouldSort:!1}:e,11(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:te.Moved}}};class fe extends ft{constructor(n){super(n),Ie(this,"actions",{onChange:t=>{let{onChange:o,compare:r,mode:i,value:l}=this.state.dataRef.current;return H(i,{0:()=>o?.(t),1:()=>{let c=l.slice(),u=c.findIndex(d=>r(d,t));return u===-1?c.push(t):c.splice(u,1),o?.(c)}})},registerOption:pe(()=>{let t=[],o=new Set;return[(r,i)=>{o.has(i)||(o.add(i),t.push({id:r,dataRef:i}))},()=>(o.clear(),this.send({type:6,options:t.splice(0)}))]}),unregisterOption:pe(()=>{let t=[];return[o=>t.push(o),()=>{this.send({type:7,options:t.splice(0)})}]}),goToOption:pe(()=>{let t=null;return[(o,r)=>{t={type:2,...o,trigger:r}},()=>t&&this.send(t)]}),closeListbox:()=>{this.send({type:1})},openListbox:t=>{this.send({type:0,focus:t})},selectActiveOption:()=>{var t;if(this.state.activeOptionIndex!==null){let{dataRef:o}=this.state.options[this.state.activeOptionIndex];this.actions.selectOption(o.current.value)}else this.state.dataRef.current.mode===0&&(this.actions.closeListbox(),(t=this.state.buttonElement)==null||t.focus({preventScroll:!0}))},selectOption:t=>{this.send({type:5,value:t})},search:t=>{this.send({type:3,value:t})},clearSearch:()=>{this.send({type:4})},setButtonElement:t=>{this.send({type:8,element:t})},setOptionsElement:t=>{this.send({type:9,element:t})}}),Ie(this,"selectors",{activeDescendantId(t){var o;let r=t.activeOptionIndex,i=t.options;return r===null||(o=i[r])==null?void 0:o.id},isActive(t,o){var r;let i=t.activeOptionIndex,l=t.options;return i!==null?((r=l[i])==null?void 0:r.id)===o:!1},hasFrozenValue(t){return t.frozenValue},shouldScrollIntoView(t,o){return t.__demoMode||t.listboxState!==0||t.activationTrigger===0?!1:this.isActive(t,o)},didButtonMove(t){return t.buttonPositionState.kind==="Moved"}}),this.on(6,()=>{requestAnimationFrame(()=>{this.send({type:10})})});{let t=this.state.id,o=Fe.get(null);this.disposables.add(o.on(vt.Push,r=>{!o.selectors.isTop(r,t)&&this.state.listboxState===0&&this.actions.closeListbox()})),this.on(0,()=>o.actions.push(t)),this.on(1,()=>o.actions.pop(t))}this.disposables.group(t=>{this.on(1,o=>{o.buttonElement&&(t.dispose(),t.add(tn(o.buttonElement,o.buttonPositionState,()=>{this.send({type:11})})))})}),this.on(5,(t,o)=>{var r;this.actions.onChange(o.value),this.state.dataRef.current.mode===0&&(this.actions.closeListbox(),(r=this.state.buttonElement)==null||r.focus({preventScroll:!0}))})}static new({id:n,__demoMode:t=!1}){return new fe({id:n,dataRef:{current:{}},listboxState:t?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,buttonElement:null,optionsElement:null,pendingShouldSort:!1,pendingFocus:{focus:O.Nothing},frozenValue:!1,__demoMode:t,buttonPositionState:te.Idle})}reduce(n,t){return H(t.type,sn,n,t)}}const He=s.createContext(null);function ve(e){let n=s.useContext(He);if(n===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,qe),t}return n}function qe({id:e,__demoMode:n=!1}){let t=s.useMemo(()=>fe.new({id:e,__demoMode:n}),[]);return mt(()=>t.dispose()),t}let le=s.createContext(null);le.displayName="ListboxDataContext";function X(e){let n=s.useContext(le);if(n===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,X),t}return n}let an=s.Fragment;function un(e,n){let t=s.useId(),o=we(),{value:r,defaultValue:i,form:l,name:c,onChange:u,by:d,invalid:v=!1,disabled:m=o||!1,horizontal:f=!1,multiple:a=!1,__demoMode:g=!1,...y}=e;const I=f?"horizontal":"vertical";let S=K(n),P=Ft(i),[$=a?[]:void 0,T]=Tt(r,u,P),k=qe({id:t,__demoMode:g}),_=s.useRef({static:!1,hold:!1}),j=s.useRef(new Map),D=Kt(d),z=s.useCallback(w=>H(b.mode,{[V.Multi]:()=>$.some(W=>D(W,w)),[V.Single]:()=>D($,w)}),[$]),b=U({value:$,disabled:m,invalid:v,mode:a?V.Multi:V.Single,orientation:I,onChange:T,compare:D,isSelected:z,optionsPropsRef:_,listRef:j});oe(()=>{k.state.dataRef.current=b},[b]);let F=L(k,w=>w.listboxState),M=Fe.get(null),Q=L(M,s.useCallback(w=>M.selectors.isTop(w,t),[M,t])),[A,h]=L(k,w=>[w.buttonElement,w.optionsElement]);kt(Q,[A,h],(w,W)=>{k.send({type:Qe.CloseListbox}),wt(W,Lt.Loose)||(w.preventDefault(),A?.focus())});let N=U({open:F===R.Open,disabled:m,invalid:v,value:$}),[se,ae]=jt({inherit:!0}),Z={ref:S},ue=s.useCallback(()=>{if(P!==void 0)return T?.(P)},[T,P]),ce=G();return x.createElement(ae,{value:se,props:{htmlFor:A?.id},slot:{open:F===R.Open,disabled:m}},x.createElement(st,null,x.createElement(He.Provider,{value:k},x.createElement(le.Provider,{value:b},x.createElement(Ct,{value:H(F,{[R.Open]:re.Open,[R.Closed]:re.Closed})},c!=null&&$!=null&&x.createElement(_t,{disabled:m,data:{[c]:$},form:l,onReset:ue}),ce({ourProps:Z,theirProps:y,slot:N,defaultTag:an,name:"Listbox"}))))))}let cn="button";function dn(e,n){let t=s.useId(),o=_e(),r=X("Listbox.Button"),i=ve("Listbox.Button"),{id:l=o||`headlessui-listbox-button-${t}`,disabled:c=r.disabled||!1,autoFocus:u=!1,...d}=e,v=K(n,Xe(),i.actions.setButtonElement),m=Ze(),[f,a,g]=L(i,h=>[h.listboxState,h.buttonElement,h.optionsElement]),y=f===R.Open;Xt(y,{trigger:a,action:s.useCallback(h=>{if(a!=null&&a.contains(h.target))return J.Ignore;let N=h.target.closest('[role="option"]:not([data-disabled])');return Te(N)?J.Select(N):g!=null&&g.contains(h.target)?J.Ignore:J.Close},[a,g]),close:i.actions.closeListbox,select:i.actions.selectActiveOption});let I=C(h=>{switch(h.key){case E.Enter:Dt(h.currentTarget);break;case E.Space:case E.ArrowDown:h.preventDefault(),i.actions.openListbox({focus:r.value?O.Nothing:O.First});break;case E.ArrowUp:h.preventDefault(),i.actions.openListbox({focus:r.value?O.Nothing:O.Last});break}}),S=C(h=>{switch(h.key){case E.Space:h.preventDefault();break}}),P=Gt(h=>{var N;i.state.listboxState===R.Open?(Y.flushSync(()=>i.actions.closeListbox()),(N=i.state.buttonElement)==null||N.focus({preventScroll:!0})):(h.preventDefault(),i.actions.openListbox({focus:O.Nothing}))}),$=C(h=>h.preventDefault()),T=Ve([l]),k=ht(),{isFocusVisible:_,focusProps:j}=Je({autoFocus:u}),{isHovered:D,hoverProps:z}=et({isDisabled:c}),{pressed:b,pressProps:F}=tt({disabled:c}),M=U({open:f===R.Open,active:b||f===R.Open,disabled:c,invalid:r.invalid,value:r.value,hover:D,focus:_,autofocus:u}),Q=L(i,h=>h.listboxState===R.Open),A=De(m(),{ref:v,id:l,type:nt(e,a),"aria-haspopup":"listbox","aria-controls":g?.id,"aria-expanded":Q,"aria-labelledby":T,"aria-describedby":k,disabled:c||void 0,autoFocus:u,onKeyDown:I,onKeyUp:S,onKeyPress:$},P,j,z,F);return G()({ourProps:A,theirProps:d,slot:M,defaultTag:cn,name:"Listbox.Button"})}let Ke=s.createContext(!1),pn="div",fn=xe.RenderStrategy|xe.Static;function vn(e,n){let t=s.useId(),{id:o=`headlessui-listbox-options-${t}`,anchor:r,portal:i=!1,modal:l=!0,transition:c=!1,...u}=e,d=ot(r),[v,m]=s.useState(null);d&&(i=!0);let f=X("Listbox.Options"),a=ve("Listbox.Options"),[g,y,I,S]=L(a,p=>[p.listboxState,p.buttonElement,p.optionsElement,p.__demoMode]),P=ge(y),$=ge(I),T=gt(),[k,_]=xt(c,v,T!==null?(T&re.Open)===re.Open:g===R.Open);Ot(k,y,a.actions.closeListbox);let j=S?!1:l&&g===R.Open;St(j,$);let D=S?!1:l&&g===R.Open;yt(D,{allowed:s.useCallback(()=>[y,I],[y,I])});let z=L(a,a.selectors.didButtonMove)?!1:k,b=L(a,a.selectors.hasFrozenValue)&&!e.static,F=ze(b,f.value),M=s.useCallback(p=>f.compare(F,p),[f.compare,F]),Q=L(a,p=>{var B;if(d==null||!((B=d?.to)!=null&&B.includes("selection")))return null;let de=p.options.findIndex(Ye=>M(Ye.dataRef.current.value));return de===-1&&(de=0),de}),A=(()=>{if(d==null)return;if(Q===null)return{...d,inner:void 0};let p=Array.from(f.listRef.current.values());return{...d,inner:{listRef:{current:p},index:Q}}})(),[h,N]=rt(A),se=it(),ae=K(n,d?h:null,a.actions.setOptionsElement,m),Z=ke();s.useEffect(()=>{let p=I;p&&g===R.Open&&($t(p)||p==null||p.focus({preventScroll:!0}))},[g,I]);let ue=C(p=>{var B;switch(Z.dispose(),p.key){case E.Space:if(a.state.searchQuery!=="")return p.preventDefault(),p.stopPropagation(),a.actions.search(p.key);case E.Enter:p.preventDefault(),p.stopPropagation(),a.actions.selectActiveOption();break;case H(f.orientation,{vertical:E.ArrowDown,horizontal:E.ArrowRight}):return p.preventDefault(),p.stopPropagation(),a.actions.goToOption({focus:O.Next});case H(f.orientation,{vertical:E.ArrowUp,horizontal:E.ArrowLeft}):return p.preventDefault(),p.stopPropagation(),a.actions.goToOption({focus:O.Previous});case E.Home:case E.PageUp:return p.preventDefault(),p.stopPropagation(),a.actions.goToOption({focus:O.First});case E.End:case E.PageDown:return p.preventDefault(),p.stopPropagation(),a.actions.goToOption({focus:O.Last});case E.Escape:p.preventDefault(),p.stopPropagation(),Y.flushSync(()=>a.actions.closeListbox()),(B=a.state.buttonElement)==null||B.focus({preventScroll:!0});return;case E.Tab:p.preventDefault(),p.stopPropagation(),Y.flushSync(()=>a.actions.closeListbox()),Pt(a.state.buttonElement,p.shiftKey?Oe.Previous:Oe.Next);break;default:p.key.length===1&&(a.actions.search(p.key),Z.setTimeout(()=>a.actions.clearSearch(),350));break}}),ce=L(a,p=>{var B;return(B=p.buttonElement)==null?void 0:B.id}),w=U({open:g===R.Open}),W=De(d?se():{},{id:o,ref:ae,"aria-activedescendant":L(a,a.selectors.activeDescendantId),"aria-multiselectable":f.mode===V.Multi?!0:void 0,"aria-labelledby":ce,"aria-orientation":f.orientation,onKeyDown:ue,role:"listbox",tabIndex:g===R.Open?0:void 0,style:{...u.style,...N,"--button-width":lt(k,y,!0).width},...Et(_)}),Ge=G(),We=s.useMemo(()=>f.mode===V.Multi?f:{...f,isSelected:M},[f,M]);return x.createElement(It,{enabled:i?e.static||k:!1,ownerDocument:P},x.createElement(le.Provider,{value:We},Ge({ourProps:W,theirProps:u,slot:w,defaultTag:pn,features:fn,visible:z,name:"Listbox.Options"})))}let bn="div";function mn(e,n){let t=s.useId(),{id:o=`headlessui-listbox-option-${t}`,disabled:r=!1,value:i,...l}=e,c=s.useContext(Ke)===!0,u=X("Listbox.Option"),d=ve("Listbox.Option"),v=L(d,b=>d.selectors.isActive(b,o)),m=u.isSelected(i),f=s.useRef(null),a=on(f),g=Rt({disabled:r,value:i,domRef:f,get textValue(){return a()}}),y=K(n,f,b=>{b?u.listRef.current.set(o,b):u.listRef.current.delete(o)}),I=L(d,b=>d.selectors.shouldScrollIntoView(b,o));oe(()=>{if(I)return Le().requestAnimationFrame(()=>{var b,F;(F=(b=f.current)==null?void 0:b.scrollIntoView)==null||F.call(b,{block:"nearest"})})},[I,f]),oe(()=>{if(!c)return d.actions.registerOption(o,g),()=>d.actions.unregisterOption(o)},[g,o,c]);let S=C(b=>{if(r)return b.preventDefault();d.actions.selectOption(i)}),P=C(()=>{if(r)return d.actions.goToOption({focus:O.Nothing});d.actions.goToOption({focus:O.Specific,id:o})}),$=Zt(),T=C(b=>$.update(b)),k=C(b=>{$.wasMoved(b)&&(r||v&&d.state.activationTrigger===ne.Pointer||d.actions.goToOption({focus:O.Specific,id:o},ne.Pointer))}),_=C(b=>{$.wasMoved(b)&&(r||v&&d.state.activationTrigger===ne.Pointer&&d.actions.goToOption({focus:O.Nothing}))}),j=U({active:v,focus:v,selected:m,disabled:r,selectedOption:m&&c}),D=c?{}:{id:o,ref:y,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":m,disabled:void 0,onClick:S,onFocus:P,onPointerEnter:T,onMouseEnter:T,onPointerMove:k,onMouseMove:k,onPointerLeave:_,onMouseLeave:_},z=G();return!m&&c?null:z({ourProps:D,theirProps:l,slot:j,defaultTag:bn,name:"Listbox.Option"})}let hn=s.Fragment;function gn(e,n){let{options:t,placeholder:o,...r}=e,i={ref:K(n)},l=X("ListboxSelectedOption"),c=U({}),u=l.value===void 0||l.value===null||l.mode===V.Multi&&Array.isArray(l.value)&&l.value.length===0,d=G();return x.createElement(Ke.Provider,{value:!0},d({ourProps:i,theirProps:{...r,children:x.createElement(x.Fragment,null,o&&u?o:t)},slot:c,defaultTag:hn,name:"ListboxSelectedOption"}))}let xn=q(un),On=q(dn),Sn=Ht,yn=q(vn),$n=q(mn),En=q(gn),Cn=Object.assign(xn,{Button:On,Label:Sn,Options:yn,Option:$n,SelectedOption:En});export{yn as B,$n as I,Cn as M,Ve as N,jt as V,Ht as Z,On as a,Kt as b,Tt as c,Dt as g,_t as j,Ft as l,_e as u};
