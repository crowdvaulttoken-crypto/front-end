import{e as I,a as t,f as T,j as e,I as y,B as F,k as $}from"./index-BnweCsDO.js";import{P as B}from"./Page-C48s_Nin.js";import{u as O}from"./useSmartContract-DqLYIZVa.js";import{u as M}from"./index.esm-BbLqj3W4.js";import{C as P}from"./ConfirmModal-DsDm8aUu.js";import{F as R}from"./ExclamationTriangleIcon-CRPNFm5X.js";import"./transition-P7nkvYRn.js";import"./dialog-iNh8GkId.js";function J(){const c=I(),{usdtBalance:u,walletData:d,deposit:p}=O(),[r,f]=t.useState(0),[x,{open:h,close:g}]=T(!1),[j,n]=t.useState(!1),[S,l]=t.useState(!1),[w,a]=t.useState(!1),[D,m]=t.useState(""),k=w?"error":S?"success":"pending",q={pending:{Icon:R,title:"Deposit Call",description:"Click ok to confirm request.",actionText:"Ok"},success:{title:"Request Processing",description:"Thank You."},error:{description:`${D}`}},v=async()=>{n(!0);var s=!1,N=Math.floor(Date.now()/1e3);parseInt(d.coolDown)+86400>N,u<r?m(`No enough USDT Balance ${r}`):(s=await p(r),s||m("Transfer Failed")),s==!0?(n(!1),l(!0),a(!1),c("/dashboards")):(n(!1),a(!0))},A=s=>{console.log(s),f(parseInt(s.requestAmount)),l(!1),a(!1),h()},{register:b,handleSubmit:E,formState:{errors:o}}=M(),i=10,C={requestAmount:{required:"Enter Amount",min:{value:`${i}`,message:`Value must not less than ${i}`}}};return e.jsxs(B,{title:"Withdraw",children:[e.jsxs("div",{className:"transition-content w-full px-(--margin-x) pt-5 lg:pt-6",children:[e.jsx("div",{className:"min-w-0 mb-10",children:e.jsx("h2",{className:"truncate text-xl font-medium tracking-wide text-gray-800 dark:text-dark-50",children:"Deposit"})}),e.jsxs("form",{onSubmit:E(A),children:[e.jsxs("label",{htmlFor:"requestAmount",children:["Enter the minimum amount ",i," USDT ",u]}),e.jsxs("div",{className:"mt-1.5 flex -space-x-px ",children:[e.jsx(y,{placeholder:"Enter amount",classNames:{root:"flex-1",input:"relative hover:z-1 focus:z-1 ltr:rounded-r-none rtl:rounded-l-none"},prefix:"$",type:"number",...b("requestAmount",C.requestAmount)}),e.jsx(F,{color:"primary",className:"ltr:rounded-l-none rtl:rounded-r-none",type:"submit",children:"Deposit"})]}),e.jsx($,{when:o&&o?.message!=="",children:o?.requestAmount&&o.requestAmount.message})]})]}),e.jsx(P,{show:x,onClose:g,messages:q,onOk:v,confirmLoading:j,state:k})]})}export{J as default};
