import{a as s,P as $,f as H,h as q,j as e,B as u,I as P,k as U}from"./index-BpWc6IEy.js";import{P as Z}from"./Page-ByVOJ9DX.js";import{u as K}from"./useSmartContract-D6xM3-oT.js";import{u as V}from"./index.esm-Npkm8Q89.js";import{C as G}from"./ConfirmModal-DccgKJpe.js";import{F as J}from"./ExclamationTriangleIcon-QPhtw9oj.js";import{K as ne}from"./transition-hb8kP95f.js";import"./dialog-HWizyDft.js";function oe({title:o,titleId:t,...x},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},x),o?s.createElement("title",{id:t},o):null,s.createElement("path",{d:"M5.85 3.5a.75.75 0 0 0-1.117-1 9.719 9.719 0 0 0-2.348 4.876.75.75 0 0 0 1.479.248A8.219 8.219 0 0 1 5.85 3.5ZM19.267 2.5a.75.75 0 1 0-1.118 1 8.22 8.22 0 0 1 1.987 4.124.75.75 0 0 0 1.48-.248A9.72 9.72 0 0 0 19.266 2.5Z"}),s.createElement("path",{fillRule:"evenodd",d:"M12 2.25A6.75 6.75 0 0 0 5.25 9v.75a8.217 8.217 0 0 1-2.119 5.52.75.75 0 0 0 .298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 1 0 7.48 0 24.583 24.583 0 0 0 4.83-1.244.75.75 0 0 0 .298-1.205 8.217 8.217 0 0 1-2.118-5.52V9A6.75 6.75 0 0 0 12 2.25ZM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 0 0 4.496 0l.002.1a2.25 2.25 0 1 1-4.5 0Z",clipRule:"evenodd"}))}const de=s.forwardRef(oe);function M({children:o,wait:t=300}){const[x,a]=s.useState(!1);if(s.useEffect(()=>{const p=setTimeout(()=>{a(!0)},t);return()=>clearTimeout(p)},[t]),!o)throw new Error("No children provided");return x?o:null}M.propTypes={children:$.node,wait:$.number};function je(){const o=H(),{address:t,bnbBalance:x,usdtBalance:a,rewardsBalance:p,affiliateData:w,registrationFee:f,upgradeAmount:C,lastCallTime:b,registerWallet:E,activateWithDeposit:A,activateWithWallet:T,availablePassive:h}=K(),F=w.parent!="0x0000000000000000000000000000000000000000",c=C,W=w.level<10?parseInt(w.level)+1:10,[y,R]=s.useState(t),[v,m]=s.useState(""),[i,B]=s.useState(""),[N,{open:S,close:D}]=q(!1),[I,l]=s.useState(!1),[O,n]=s.useState(!1),[g,d]=s.useState(!1),[L,j]=s.useState(!1),[k,Y]=s.useState("register"),[Q,X]=q(!0),_=g?"error":O?"success":"pending",ee={pending:{Icon:J,title:" Send request ",description:"Click ok to confirm request.",actionText:"Ok"},success:{title:"Request Processing",description:"Activation Completed"},error:{description:L.length>0?`${L}`:"Ensure internet is on and retry. Contact support if issue remains."}};s.useEffect(()=>{async function r(){R(t),m(v),B(i),Y(k),N==!1&&l(!1)}r()},[N,t,k,i,v]);var se=Math.floor(Date.now()/1e3);const re=async()=>{if(l(!0),se<parseInt(b)+60){j("60 Seconds CoolDown. Try Again Later"),l(!1),n(!1),d(!0);return}var r=!1;if(k=="register"){if(parseFloat(a)<10){j("You must have at least 10 USDT"),l(!1),n(!1),d(!0);return}r=await E(v),r||j("Failed to register")}if(k=="activatebyusdt"){if(parseFloat(a)<parseFloat(c)){j(`You must have at least ${c} USDT `),l(!1),n(!1),d(!0);return}r=await A(),r||j("Failed to deposit")}if(k=="activatebywallet"){if(parseFloat(p)<parseFloat(c)){j(`You must have at least ${p} < ${c} USDT `),l(!1),n(!1),d(!0);return}r=await T(),r||j("Failed to deduct balance")}r==!0?(l(!1),n(!0),d(!1),o("/dashboards")):(l(!1),d(!0))},{register:te,handleSubmit:ae,formState:{errors:z}}=V(),le={referralWallet:{required:"Referral wallet is required",pattern:{value:/^0x[a-fA-F0-9]{40}$/i,message:"Invalid Wallet Address"}}},ie=async r=>{console.log(r),m(r.referralWallet),n(!1),d(!1),S()};return e.jsxs(Z,{title:"Join and Activate",children:[e.jsxs("div",{className:"transition-content w-full px-(--margin-x) pt-5 lg:pt-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 min-w-0 mb-5 p-5",children:[e.jsxs(u,{className:"mt-5",children:["BNB ",parseFloat(x).toFixed(4)]}),e.jsxs(u,{className:"mt-5",children:["USDT ",parseFloat(a).toFixed(2)]}),e.jsxs(u,{className:"mt-5",children:["Rewards ",parseFloat(p).toFixed(2)]})]}),e.jsx(M,{wait:3e3,children:F?e.jsxs("div",{className:"card mt-5 mb-10 p-5",children:[e.jsx("div",{className:"mt-2",children:e.jsx(U,{when:i&&i?.message!=="",children:i})}),h>0?e.jsx(ne,{as:s.Fragment,show:Q,leave:"duration-200 transition ease-in-out",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsxs("div",{role:"alert",className:"flex flex-col items-center space-y-4 rounded-lg border border-primary-200 p-4 mb-5 text-primary-800 dark:border-primary-450 dark:text-dark-100 sm:flex-row sm:space-x-2 sm:space-y-0 rtl:sm:space-x-reverse",children:[e.jsxs("span",{className:"flex-1 text-center sm:text-start",children:["You have available ",parseInt(h)," passive rewards."]}),e.jsxs(u,{onClick:X.close,color:"primary",className:"animate-pulse space-x-2 rounded-full uppercase ",children:[e.jsx(de,{className:"size-4"}),e.jsx("span",{children:"Collect before upgrade!"})]})]})}):"",e.jsx("div",{className:"hide-scrollbar min-w-full overflow-x-auto rounded-lg border border-gray-200 dark:border-dark-500 p-5",children:e.jsxs("table",{className:"table-auto w-full text-left rtl:text-right",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"font-semibold uppercase text-gray-800 dark:text-dark-100",children:[e.jsx("th",{children:"Activation Details"}),e.jsx("th",{children:"Percent"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{children:["Rank ",W]}),e.jsxs("td",{children:[c," USDT"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Referral Rewards"}),e.jsx("td",{children:"10%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Over-Ride Rewards Level 1"}),e.jsx("td",{children:"10%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Over-Ride Rewards Level 2"}),e.jsx("td",{children:"10%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Over-Ride Rewards Level 3"}),e.jsx("td",{children:"10%"})]}),e.jsxs("tr",{className:"font-semibold uppercase text-gray-800 dark:text-dark-100",children:[e.jsx("td",{children:"24 Hours Passive Rewards"}),e.jsx("td",{children:"UP 1% - 3%"})]})]})]})}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-2 px-0 sm:grid-cols-2 sm:px-2",children:[e.jsx("div",{className:"grid grid-cols-1 gap-1 sm:grid-cols-1",children:e.jsx(u,{className:"w-full",onClick:()=>{Y("activatebyusdt"),n(!1),d(!1),S()},children:"Activate By USDT Balance"})}),e.jsx("div",{className:"grid grid-cols-1 gap-1 sm:grid-cols-1",children:e.jsx(u,{className:"w-full",onClick:()=>{Y("activatebywallet"),n(!1),d(!1),S()},children:"Activate By Rewards Balance"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5 text-gray-900 dark:text-dark-100",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-500 to-primary-600 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium",children:" Register Your Account  "}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsxs("div",{className:"mt-4 text-s font-medium text-gray-900 dark:text-dark-100 ",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Info: "})," Register your wallet to join our community."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"About: "}),"You will create an account, network, and wallet."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Benefits: "}),"You will get the privillege to earn rewards by joining the programs."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Requirements: "}),"To register you need a wallet address and valid sponsor."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fees:"})," You need ",f," USDT and eno ugh BNB balance for registrations."]})]})}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5"})]})}),e.jsx("div",{className:"card mt-5 mb-10 p-5",children:e.jsxs("form",{onSubmit:ae(ie),autoComplete:"off",children:[e.jsx("div",{className:"w-full mb-5",children:e.jsx(P,{name:"yourwalletaddress",label:"Your Wallet Address",placeholder:"Enter Wallet Address",value:y||"",description:"Your recognize wallet address.",onChange:r=>R(r.target.value),readOnly:!0})}),e.jsx("div",{className:"w-full mb-5",children:e.jsx(P,{name:"referralWallet",label:"Referral Wallet",placeholder:"Enter Wallet Address",description:"Referral Wallet Address.",onChange:r=>{m(r.target.value)},...te("referralWallet",le.referralWallet),error:z?.referralWallet&&z.referralWallet.message})}),e.jsx("div",{className:"mt-2",children:e.jsx(U,{when:i&&i?.message!=="",children:i})}),e.jsx("div",{className:"w-full",children:e.jsx(u,{type:"submit",className:"mt-5 w-full",color:"primary",children:"REGISTER"})})]})})]})})]}),e.jsx(G,{show:N,onClose:D,messages:ee,onOk:re,confirmLoading:I,state:_})]})}function ve(){const o=H(),{address:t,brokerFee:x,WNTradesContract:a,activateBroker:p,convertWeiToEther:w}=K(),[f,C]=s.useState(""),[b,{open:E,close:A}]=q(!1),[T,h]=s.useState(!1),[F,c]=s.useState(!1),[W,y]=s.useState(!1),[R,v]=s.useState(!1),[m,i]=s.useState([]),B=W?"error":F?"success":"pending",N={pending:{Icon:J,title:" Send request ",description:"Click ok to confirm request.",actionText:"Ok"},success:{title:"Request Processing",description:"Activation Completed"},error:{description:`${R} Ensure internet is on and retry. Contact support if issue remains.`}};s.useEffect(()=>{async function g(){t!=="0x0000000000000000000000000000000000000000"&&a&&i(await a.brokers(t)),C(f),b==!1&&h(!1)}g()},[t,b,f,a]);const S=async()=>{h(!0);var g=!1;g=await p(),g||v("Failed to register"),g==!0?(v("Registered Complete"),h(!1),c(!0),y(!1),o("/dashboards/broker")):(h(!1),y(!0))},{register:D,handleSubmit:I,formState:{errors:l}}=V(),O=async()=>{console.log("on submit:"),c(!1),y(!1),E()},n={yourwalletaddress:{required:"Your wallet is required"}};return e.jsxs(Z,{title:"Merchant Program",children:[e.jsxs("div",{className:"m-5",children:[e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Country Head"}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"Enjoy all deposits under your organizations"})})]})}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-2 sm:px-5",children:[e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Requirements"}),e.jsxs("div",{className:"flex items-end justify-between space-x-2 ",children:[e.jsxs("p",{className:"mt-4 text-s font-medium text-white",children:[w(x)," USDT"]}),e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"Rank 10"})]}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5",children:e.jsx("span",{className:"text-2xl",children:"1"})})]}),e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Country Head Incentives"}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"The country head will get 5% of the deposit and activation of accounts."})}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5",children:e.jsx("span",{className:"text-2xl",children:"2"})})]})]})]}),e.jsx("div",{className:"card mb-10 p-5",children:e.jsx(M,{wait:2e3,children:m.isActive?e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"MERCHANT STATUS"}),e.jsxs("p",{className:"uppercase font-medium text-white",children:["Merchant Fees: ",parseFloat(m.fees)/100," %  "]}),e.jsxs("p",{className:"uppercase font-medium text-white",children:["Total Income: ",parseFloat(m.totalIncome)," "]})]})})}):e.jsxs("form",{onSubmit:I(O),autoComplete:"off",children:[e.jsx("div",{className:"w-full mb-5",children:e.jsx(P,{name:"yourwalletaddress",label:"Your Wallet Address!",placeholder:"Enter Wallet Address",value:t||"",description:"Your recognize wallet address.",readOnly:!0,...D("yourwalletaddress",n.yourwalletaddress),error:l?.yourwalletaddress&&l.yourwalletaddress.message})}),e.jsx("div",{className:"mt-2",children:e.jsx(U,{when:f&&f?.message!=="",children:f})}),e.jsx("div",{className:"w-full",children:e.jsxs(u,{type:"submit",className:"mt-5 w-full",color:"primary",children:["ACTIVATE [",m.fees,"]"]})})]})})}),e.jsx(G,{show:b,onClose:A,messages:N,onOk:S,confirmLoading:T,state:B})]})}export{ve as Broker,je as default};
