import{R as Ce,a as i,ac as z,av as Ye}from"./index-BWgT2Jzv.js";import{p as Me,o as X,a3 as qe,aa as ze,ab as Pe,n as V,z as Xe,B as Je}from"./transition-5Qc8PpJk.js";import{o as Qe,s as Ze,f as et,d as tt,c as nt,i as U,e as rt,g as ee,m as te,r as ot,h as it,a as lt}from"./floating-ui.dom-DmqE9iVV.js";const Se=typeof document<"u"?Ce.useLayoutEffect:()=>{};var ne;const st=(ne=Ce.useInsertionEffect)!==null&&ne!==void 0?ne:Se;function at(e){const t=i.useRef(null);return st(()=>{t.current=e},[e]),i.useCallback((...n)=>{const r=t.current;return r?.(...n)},[])}const H=e=>{var t;return(t=e?.ownerDocument)!==null&&t!==void 0?t:document},k=e=>e&&"window"in e&&e.window===e?e:H(e).defaultView||window;function ut(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function ct(e){return ut(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let ft=!1;function de(){return ft}function Le(e,t){if(!de())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:ct(n)?n=n.host:n=n.parentNode}return!1}const le=(e=document)=>{var t;if(!de())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function He(e){return de()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function dt(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function gt(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Ae(e){let t=null;return()=>(t==null&&(t=e()),t)}const pt=Ae(function(){return gt(/^Mac/i)}),vt=Ae(function(){return dt(/Android/i)});function Ie(){let e=i.useRef(new Map),t=i.useCallback((o,s,a,l)=>{let u=l?.once?(...c)=>{e.current.delete(a),a(...c)}:a;e.current.set(a,{type:s,eventTarget:o,fn:u,options:l}),o.addEventListener(s,u,l)},[]),n=i.useCallback((o,s,a,l)=>{var u;let c=((u=e.current.get(a))===null||u===void 0?void 0:u.fn)||a;o.removeEventListener(s,c,l),e.current.delete(a)},[]),r=i.useCallback(()=>{e.current.forEach((o,s)=>{n(o.eventTarget,o.type,s,o.options)})},[n]);return i.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function mt(e){return e.pointerType===""&&e.isTrusted?!0:vt()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function De(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function bt(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function ke(e){let t=i.useRef({isFocused:!1,observer:null});Se(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=at(r=>{e?.(r)});return i.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let o=r.target,s=a=>{if(t.current.isFocused=!1,o.disabled){let l=De(a);n(l)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};o.addEventListener("focusout",s,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&o.disabled){var a;(a=t.current.observer)===null||a===void 0||a.disconnect();let l=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:l})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:l}))}}),t.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let ht=!1,j=null,se=new Set,G=new Map,O=!1,ae=!1;const $t={Tab:!0,Escape:!0};function ge(e,t){for(let n of se)n(e,t)}function Et(e){return!(e.metaKey||!pt()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function J(e){O=!0,Et(e)&&(j="keyboard",ge("keyboard",e))}function B(e){j="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(O=!0,ge("pointer",e))}function Oe(e){mt(e)&&(O=!0,j="virtual")}function Be(e){e.target===window||e.target===document||ht||!e.isTrusted||(!O&&!ae&&(j="virtual",ge("virtual",e)),O=!1,ae=!1)}function We(){O=!1,ae=!0}function ue(e){if(typeof window>"u"||typeof document>"u"||G.get(k(e)))return;const t=k(e),n=H(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){O=!0,r.apply(this,arguments)},n.addEventListener("keydown",J,!0),n.addEventListener("keyup",J,!0),n.addEventListener("click",Oe,!0),t.addEventListener("focus",Be,!0),t.addEventListener("blur",We,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",B,!0),n.addEventListener("pointermove",B,!0),n.addEventListener("pointerup",B,!0)),t.addEventListener("beforeunload",()=>{_e(e)},{once:!0}),G.set(t,{focus:r})}const _e=(e,t)=>{const n=k(e),r=H(e);t&&r.removeEventListener("DOMContentLoaded",t),G.has(n)&&(n.HTMLElement.prototype.focus=G.get(n).focus,r.removeEventListener("keydown",J,!0),r.removeEventListener("keyup",J,!0),r.removeEventListener("click",Oe,!0),n.removeEventListener("focus",Be,!0),n.removeEventListener("blur",We,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",B,!0),r.removeEventListener("pointermove",B,!0),r.removeEventListener("pointerup",B,!0)),G.delete(n))};function wt(e){const t=H(e);let n;return t.readyState!=="loading"?ue(e):(n=()=>{ue(e)},t.addEventListener("DOMContentLoaded",n)),()=>_e(e,n)}typeof document<"u"&&wt();function Ne(){return j!=="pointer"}const yt=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function xt(e,t,n){let r=H(n?.target);const o=typeof window<"u"?k(n?.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?k(n?.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?k(n?.target).HTMLElement:HTMLElement,l=typeof window<"u"?k(n?.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof o&&!yt.has(r.activeElement.type)||r.activeElement instanceof s||r.activeElement instanceof a&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof l&&!$t[n.key])}function Tt(e,t,n){ue(),i.useEffect(()=>{let r=(o,s)=>{xt(!!n?.isTextInput,o,s)&&e(Ne())};return se.add(r),()=>{se.delete(r)}},t)}function Ft(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:o}=e;const s=i.useCallback(u=>{if(u.target===u.currentTarget)return r&&r(u),o&&o(!1),!0},[r,o]),a=ke(s),l=i.useCallback(u=>{const c=H(u.target),p=c?le(c):le();u.target===u.currentTarget&&p===He(u.nativeEvent)&&(n&&n(u),o&&o(!0),a(u))},[o,n,a]);return{focusProps:{onFocus:!t&&(n||o||r)?l:void 0,onBlur:!t&&(r||o)?s:void 0}}}function Rt(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:o}=e,s=i.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:l}=Ie(),u=i.useCallback(v=>{v.currentTarget.contains(v.target)&&s.current.isFocusWithin&&!v.currentTarget.contains(v.relatedTarget)&&(s.current.isFocusWithin=!1,l(),n&&n(v),o&&o(!1))},[n,o,s,l]),c=ke(u),p=i.useCallback(v=>{if(!v.currentTarget.contains(v.target))return;const b=H(v.target),f=le(b);if(!s.current.isFocusWithin&&f===He(v.nativeEvent)){r&&r(v),o&&o(!0),s.current.isFocusWithin=!0,c(v);let d=v.currentTarget;a(b,"focus",g=>{if(s.current.isFocusWithin&&!Le(d,g.target)){let m=new b.defaultView.FocusEvent("blur",{relatedTarget:g.target});bt(m,d);let $=De(m);u($)}},{capture:!0})}},[r,o,c,a,u]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:p,onBlur:u}}}let ce=!1,Y=0;function Ct(){ce=!0,setTimeout(()=>{ce=!1},50)}function be(e){e.pointerType==="touch"&&Ct()}function Mt(){if(!(typeof document>"u"))return Y===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",be),Y++,()=>{Y--,!(Y>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",be)}}function an(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:o}=e,[s,a]=i.useState(!1),l=i.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;i.useEffect(Mt,[]);let{addGlobalListener:u,removeAllGlobalListeners:c}=Ie(),{hoverProps:p,triggerHoverEnd:v}=i.useMemo(()=>{let b=(g,m)=>{if(l.pointerType=m,o||m==="touch"||l.isHovered||!g.currentTarget.contains(g.target))return;l.isHovered=!0;let $=g.currentTarget;l.target=$,u(H(g.target),"pointerover",w=>{l.isHovered&&l.target&&!Le(l.target,w.target)&&f(w,w.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:$,pointerType:m}),n&&n(!0),a(!0)},f=(g,m)=>{let $=l.target;l.pointerType="",l.target=null,!(m==="touch"||!l.isHovered||!$)&&(l.isHovered=!1,c(),r&&r({type:"hoverend",target:$,pointerType:m}),n&&n(!1),a(!1))},d={};return typeof PointerEvent<"u"&&(d.onPointerEnter=g=>{ce&&g.pointerType==="mouse"||b(g,g.pointerType)},d.onPointerLeave=g=>{!o&&g.currentTarget.contains(g.target)&&f(g,g.pointerType)}),{hoverProps:d,triggerHoverEnd:f}},[t,n,r,o,l,u,c]);return i.useEffect(()=>{o&&v({currentTarget:l.target},l.pointerType)},[o]),{hoverProps:p,isHovered:s}}function un(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,o=i.useRef({isFocused:!1,isFocusVisible:t||Ne()}),[s,a]=i.useState(!1),[l,u]=i.useState(()=>o.current.isFocused&&o.current.isFocusVisible),c=i.useCallback(()=>u(o.current.isFocused&&o.current.isFocusVisible),[]),p=i.useCallback(f=>{o.current.isFocused=f,a(f),c()},[c]);Tt(f=>{o.current.isFocusVisible=f,c()},[],{isTextInput:n});let{focusProps:v}=Ft({isDisabled:r,onFocusChange:p}),{focusWithinProps:b}=Rt({isDisabled:!r,onFocusWithinChange:p});return{isFocused:s,isFocusVisible:l,focusProps:r?b:v}}function Pt(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function St(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function cn({disabled:e=!1}={}){let t=i.useRef(null),[n,r]=i.useState(!1),o=Me(),s=X(()=>{t.current=null,r(!1),o.dispose()}),a=X(l=>{if(o.dispose(),t.current===null){t.current=l.currentTarget,r(!0);{let u=qe(l.currentTarget);o.addEventListener(u,"pointerup",s,!1),o.addEventListener(u,"pointermove",c=>{if(t.current){let p=Pt(c);r(St(p,t.current.getBoundingClientRect()))}},!1),o.addEventListener(u,"pointercancel",s,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:a,onPointerUp:s,onClick:s}}}function fn(e){let t=e.parentElement,n=null;for(;t&&!ze(t);)Pe(t)&&(n=t),t=t.parentElement;let r=t?.getAttribute("disabled")==="";return r&&Lt(n)?!1:r}function Lt(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(Pe(t))return!1;t=t.previousElementSibling}return!0}function he(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function dn(e,t,n=!1){let[r,o]=i.useState(()=>he(t));return V(()=>{if(!t||!e)return;let s=Xe();return s.requestAnimationFrame(function a(){s.requestAnimationFrame(a),o(l=>{let u=he(t);return u.width===l.width&&u.height===l.height?l:u})}),()=>{s.dispose()}},[t,e]),n?{width:`${r.width}px`,height:`${r.height}px`}:r}function gn(e,t){return i.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||t?.tagName==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Ht(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}var At=typeof document<"u",It=function(){},q=At?i.useLayoutEffect:It;function Q(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Q(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!Q(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ge(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $e(e,t){const n=Ge(e);return Math.round(t*n)/n}function re(e){const t=i.useRef(e);return q(()=>{t.current=e}),t}function Dt(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:u,open:c}=e,[p,v]=i.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[b,f]=i.useState(r);Q(b,r)||f(r);const[d,g]=i.useState(null),[m,$]=i.useState(null),w=i.useCallback(y=>{y!==T.current&&(T.current=y,g(y))},[]),h=i.useCallback(y=>{y!==M.current&&(M.current=y,$(y))},[]),E=s||d,x=a||m,T=i.useRef(null),M=i.useRef(null),A=i.useRef(p),K=u!=null,I=re(u),F=re(o),D=re(c),S=i.useCallback(()=>{if(!T.current||!M.current)return;const y={placement:t,strategy:n,middleware:b};F.current&&(y.platform=F.current),nt(T.current,M.current,y).then(C=>{const R={...C,isPositioned:D.current!==!1};L.current&&!Q(A.current,R)&&(A.current=R,z.flushSync(()=>{v(R)}))})},[b,t,n,F,D]);q(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,v(y=>({...y,isPositioned:!1})))},[c]);const L=i.useRef(!1);q(()=>(L.current=!0,()=>{L.current=!1}),[]),q(()=>{if(E&&(T.current=E),x&&(M.current=x),E&&x){if(I.current)return I.current(E,x,S);S()}},[E,x,S,I,K]);const _=i.useMemo(()=>({reference:T,floating:M,setReference:w,setFloating:h}),[w,h]),P=i.useMemo(()=>({reference:E,floating:x}),[E,x]),N=i.useMemo(()=>{const y={position:n,left:0,top:0};if(!P.floating)return y;const C=$e(P.floating,p.x),R=$e(P.floating,p.y);return l?{...y,transform:"translate("+C+"px, "+R+"px)",...Ge(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:C,top:R}},[n,l,P.floating,p.x,p.y]);return i.useMemo(()=>({...p,update:S,refs:_,elements:P,floatingStyles:N}),[p,S,_,P,N])}const Ve=(e,t)=>({...Qe(e),options:[e,t]}),kt=(e,t)=>({...Ze(e),options:[e,t]}),Ot=(e,t)=>({...et(e),options:[e,t]}),Bt=(e,t)=>({...tt(e),options:[e,t]}),je={...Ye},Wt=je.useInsertionEffect,_t=Wt||(e=>e());function Ke(e){const t=i.useRef(()=>{});return _t(()=>{t.current=e}),i.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}var fe=typeof document<"u"?i.useLayoutEffect:i.useEffect;let Ee=!1,Nt=0;const we=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Nt++;function Gt(){const[e,t]=i.useState(()=>Ee?we():void 0);return fe(()=>{e==null&&t(we())},[]),i.useEffect(()=>{Ee=!0},[]),e}const Vt=je.useId,jt=Vt||Gt;function Kt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(o=>o!==n))||[])}}}const Ut=i.createContext(null),Yt=i.createContext(null),qt=()=>{var e;return((e=i.useContext(Ut))==null?void 0:e.id)||null},zt=()=>i.useContext(Yt),Xt="data-floating-ui-focusable";function Jt(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=jt(),s=i.useRef({}),[a]=i.useState(()=>Kt()),l=qt()!=null,[u,c]=i.useState(r.reference),p=Ke((f,d,g)=>{s.current.openEvent=f?d:void 0,a.emit("openchange",{open:f,event:d,reason:g,nested:l}),n?.(f,d,g)}),v=i.useMemo(()=>({setPositionReference:c}),[]),b=i.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return i.useMemo(()=>({dataRef:s,open:t,onOpenChange:p,elements:b,events:a,floatingId:o,refs:v}),[t,p,b,a,o,v])}function Qt(e){e===void 0&&(e={});const{nodeId:t}=e,n=Jt({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[s,a]=i.useState(null),[l,u]=i.useState(null),p=o?.domReference||s,v=i.useRef(null),b=zt();fe(()=>{p&&(v.current=p)},[p]);const f=Dt({...e,elements:{...o,...l&&{reference:l}}}),d=i.useCallback(h=>{const E=U(h)?{getBoundingClientRect:()=>h.getBoundingClientRect(),contextElement:h}:h;u(E),f.refs.setReference(E)},[f.refs]),g=i.useCallback(h=>{(U(h)||h===null)&&(v.current=h,a(h)),(U(f.refs.reference.current)||f.refs.reference.current===null||h!==null&&!U(h))&&f.refs.setReference(h)},[f.refs]),m=i.useMemo(()=>({...f.refs,setReference:g,setPositionReference:d,domReference:v}),[f.refs,g,d]),$=i.useMemo(()=>({...f.elements,domReference:p}),[f.elements,p]),w=i.useMemo(()=>({...f,...r,refs:m,elements:$,nodeId:t}),[f,m,$,t,r]);return fe(()=>{r.dataRef.current.floatingContext=w;const h=b?.nodesRef.current.find(E=>E.id===t);h&&(h.context=w)}),i.useMemo(()=>({...f,context:w,refs:m,elements:$}),[f,m,$,w])}const ye="active",xe="selected";function oe(e,t,n){const r=new Map,o=n==="item";let s=e;if(o&&e){const{[ye]:a,[xe]:l,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1,[Xt]:""},...s,...t.map(a=>{const l=a?a[n]:null;return typeof l=="function"?e?l(e):null:l}).concat(e).reduce((a,l)=>(l&&Object.entries(l).forEach(u=>{let[c,p]=u;if(!(o&&[ye,xe].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof p=="function"){var v;(v=r.get(c))==null||v.push(p),a[c]=function(){for(var b,f=arguments.length,d=new Array(f),g=0;g<f;g++)d[g]=arguments[g];return(b=r.get(c))==null?void 0:b.map(m=>m(...d)).find(m=>m!==void 0)}}}else a[c]=p}),a),{})}}function Zt(e){e===void 0&&(e=[]);const t=e.map(l=>l?.reference),n=e.map(l=>l?.floating),r=e.map(l=>l?.item),o=i.useCallback(l=>oe(l,e,"reference"),t),s=i.useCallback(l=>oe(l,e,"floating"),n),a=i.useCallback(l=>oe(l,e,"item"),r);return i.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:a}),[o,s,a])}function Te(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const en=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:o,offset:s=0,index:a=0,minItemsVisible:l=4,referenceOverflowThreshold:u=0,scrollRef:c,...p}=rt(e,t),{rects:v,elements:{floating:b}}=t,f=n.current[a],d=c?.current||b,g=b.clientTop||d.clientTop,m=b.clientTop!==0,$=d.clientTop!==0,w=b===d;if(!f)return{};const h={...t,...await Ve(-f.offsetTop-b.clientTop-v.reference.height/2-f.offsetHeight/2-s).fn(t)},E=await ee(Te(h,d.scrollHeight+g+b.clientTop),p),x=await ee(h,{...p,elementContext:"reference"}),T=te(0,E.top),M=h.y+T,I=(d.scrollHeight>d.clientHeight?F=>F:ot)(te(0,d.scrollHeight+(m&&w||$?g*2:0)-T-te(0,E.bottom)));if(d.style.maxHeight=I+"px",d.scrollTop=T,o){const F=d.offsetHeight<f.offsetHeight*it(l,n.current.length)-1||x.top>=-u||x.bottom>=-u;z.flushSync(()=>o(F))}return r&&(r.current=await ee(Te({...h,y:M},d.offsetHeight+g+b.clientTop),p)),{y:M}}});function tn(e,t){const{open:n,elements:r}=e,{enabled:o=!0,overflowRef:s,scrollRef:a,onChange:l}=t,u=Ke(l),c=i.useRef(!1),p=i.useRef(null),v=i.useRef(null);i.useEffect(()=>{if(!o)return;function f(g){if(g.ctrlKey||!d||s.current==null)return;const m=g.deltaY,$=s.current.top>=-.5,w=s.current.bottom>=-.5,h=d.scrollHeight-d.clientHeight,E=m<0?-1:1,x=m<0?"max":"min";d.scrollHeight<=d.clientHeight||(!$&&m>0||!w&&m<0?(g.preventDefault(),z.flushSync(()=>{u(T=>T+Math[x](m,h*E))})):/firefox/i.test(Ht())&&(d.scrollTop+=m))}const d=a?.current||r.floating;if(n&&d)return d.addEventListener("wheel",f),requestAnimationFrame(()=>{p.current=d.scrollTop,s.current!=null&&(v.current={...s.current})}),()=>{p.current=null,v.current=null,d.removeEventListener("wheel",f)}},[o,n,r.floating,s,a,u]);const b=i.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const f=a?.current||r.floating;if(!(!s.current||!f||!c.current)){if(p.current!==null){const d=f.scrollTop-p.current;(s.current.bottom<-.5&&d<-1||s.current.top<-.5&&d>1)&&z.flushSync(()=>u(g=>g+d))}requestAnimationFrame(()=>{p.current=f.scrollTop})}}}),[r.floating,u,s,a]);return i.useMemo(()=>o?{floating:b}:{},[o,b])}let W=i.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});W.displayName="FloatingContext";let pe=i.createContext(null);pe.displayName="PlacementContext";function pn(e){return i.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function vn(){return i.useContext(W).setReference}function mn(){return i.useContext(W).getReferenceProps}function bn(){let{getFloatingProps:e,slot:t}=i.useContext(W);return i.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function hn(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=i.useContext(pe),n=i.useMemo(()=>e,[JSON.stringify(e,(o,s)=>{var a;return(a=s?.outerHTML)!=null?a:s})]);V(()=>{t?.(n??null)},[t,n]);let r=i.useContext(W);return i.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let Fe=4;function $n({children:e,enabled:t=!0}){let[n,r]=i.useState(null),[o,s]=i.useState(0),a=i.useRef(null),[l,u]=i.useState(null);nn(l);let c=t&&n!==null&&l!==null,{to:p="bottom",gap:v=0,offset:b=0,padding:f=0,inner:d}=rn(n,l),[g,m="center"]=p.split(" ");V(()=>{c&&s(0)},[c]);let{refs:$,floatingStyles:w,context:h}=Qt({open:c,placement:g==="selection"?m==="center"?"bottom":`bottom-${m}`:m==="center"?`${g}`:`${g}-${m}`,strategy:"absolute",transform:!1,middleware:[Ve({mainAxis:g==="selection"?0:v,crossAxis:b}),kt({padding:f}),g!=="selection"&&Ot({padding:f}),g==="selection"&&d?en({...d,padding:f,overflowRef:a,offset:o,minItemsVisible:Fe,referenceOverflowThreshold:f,onFallbackChange(F){var D,S;if(!F)return;let L=h.elements.floating;if(!L)return;let _=parseFloat(getComputedStyle(L).scrollPaddingBottom)||0,P=Math.min(Fe,L.childElementCount),N=0,y=0;for(let C of(S=(D=h.elements.floating)==null?void 0:D.childNodes)!=null?S:[])if(Je(C)){let R=C.offsetTop,ve=R+C.clientHeight+_,Z=L.scrollTop,me=Z+L.clientHeight;if(R>=Z&&ve<=me)P--;else{y=Math.max(0,Math.min(ve,me)-Math.max(R,Z)),N=C.clientHeight;break}}P>=1&&s(C=>{let R=N*P-y+_;return C>=R?C:R})}}):null,Bt({padding:f,apply({availableWidth:F,availableHeight:D,elements:S}){Object.assign(S.floating.style,{overflow:"auto",maxWidth:`${F}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${D}px)`})}})].filter(Boolean),whileElementsMounted:lt}),[E=g,x=m]=h.placement.split("-");g==="selection"&&(E="selection");let T=i.useMemo(()=>({anchor:[E,x].filter(Boolean).join(" ")}),[E,x]),M=tn(h,{overflowRef:a,onChange:s}),{getReferenceProps:A,getFloatingProps:K}=Zt([M]),I=X(F=>{u(F),$.setFloating(F)});return i.createElement(pe.Provider,{value:r},i.createElement(W.Provider,{value:{setFloating:I,setReference:$.setReference,styles:w,getReferenceProps:A,getFloatingProps:K,slot:T}},e))}function nn(e){V(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let o=parseInt(n);isNaN(o)||r!==o&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function rn(e,t){var n,r,o;let s=ie((n=e?.gap)!=null?n:"var(--anchor-gap, 0)",t),a=ie((r=e?.offset)!=null?r:"var(--anchor-offset, 0)",t),l=ie((o=e?.padding)!=null?o:"var(--anchor-padding, 0)",t);return{...e,gap:s,offset:a,padding:l}}function ie(e,t,n=void 0){let r=Me(),o=X((u,c)=>{if(u==null)return[n,null];if(typeof u=="number")return[u,null];if(typeof u=="string"){if(!c)return[n,null];let p=Re(u,c);return[p,v=>{let b=Ue(u);{let f=b.map(d=>window.getComputedStyle(c).getPropertyValue(d));r.requestAnimationFrame(function d(){r.nextFrame(d);let g=!1;for(let[$,w]of b.entries()){let h=window.getComputedStyle(c).getPropertyValue(w);if(f[$]!==h){f[$]=h,g=!0;break}}if(!g)return;let m=Re(u,c);p!==m&&(v(m),p=m)})}return r.dispose}]}return[n,null]}),s=i.useMemo(()=>o(e,t)[0],[e,t]),[a=s,l]=i.useState();return V(()=>{let[u,c]=o(e,t);if(l(u),!!c)return c(l)},[e,t]),a}function Ue(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),o=t[1].slice(n+1).trim();return o?[r,...Ue(o)]:[r]}return[]}function Re(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}export{un as $,$n as A,vn as F,hn as R,bn as T,an as a,mn as b,dn as c,gn as e,fn as s,cn as w,pn as y};
