import{a as s,P as B,h as O,e as P,j as e,I as D,k as U,B as z}from"./index-CgTWXYBw.js";import{P as M}from"./Page--Q0p8Xsp.js";import{u as $}from"./useSmartContract-Bn5eqj-W.js";import{u as L}from"./index.esm-BvGX2K6G.js";import{C as H}from"./ConfirmModal-CTPjwSQf.js";import{F as G}from"./ExclamationTriangleIcon-CaMgrcDk.js";import"./transition-CuOcGFN4.js";import"./dialog-jM_G5bM-.js";function Y({children:p,wait:a=300}){const[x,n]=s.useState(!1);if(s.useEffect(()=>{const h=setTimeout(()=>{n(!0)},a);return()=>clearTimeout(h)},[a]),!p)throw new Error("No children provided");return x?p:null}Y.propTypes={children:B.node,wait:B.number};function de(){const p=O(),{address:a,usdtBalance:x,rewardsBalance:n,affiliateData:h,registrationFee:S,upgradeAmount:m,lastCallTime:E,registerWallet:g,activateWithDeposit:C,activateWithWallet:T}=$(),k=h.parent!="0x0000000000000000000000000000000000000000",i=m,[A,j]=s.useState(a),[v,u]=s.useState(""),[f,y]=s.useState(""),[c,{open:W,close:F}]=P(!1),[R,l]=s.useState(!1),[I,d]=s.useState(!1),[b,o]=s.useState(!1),[N,r]=s.useState(!1),[w,J]=s.useState("register"),V=b?"error":I?"success":"pending",K={pending:{Icon:G,title:" Send request ",description:"Click ok to confirm request.",actionText:"Ok"},success:{title:"Request Processing",description:"Activation Completed"},error:{description:N.length>0?`${N}`:"Ensure internet is on and retry. Contact support if issue remains."}};s.useEffect(()=>{async function t(){j(a),u(v),y(f),J(w),c==!1&&l(!1)}t()},[c,a,w,f,v]);var Q=Math.floor(Date.now()/1e3);const X=async()=>{if(l(!0),Q<parseInt(E)+60){r("60 Seconds CoolDown. Try Again Later"),l(!1),d(!1),o(!0);return}var t=!1;if(w=="register"){if(parseFloat(x)<10){r("You must have at least 10 USDT"),l(!1),d(!1),o(!0);return}t=await g(v),t||r("Failed to register")}if(w=="activatebyusdt"){if(parseFloat(x)<parseFloat(i)){r(`You must have at least ${i} USDT `),l(!1),d(!1),o(!0);return}t=await C(),t||r("Failed to deposit")}if(w=="activatebywallet"){if(parseFloat(n)<parseFloat(i)){r(`You must have at least ${n} < ${i} USDT `),l(!1),d(!1),o(!0);return}t=await T(),t||r("Failed to deduct balance")}t==!0?(l(!1),d(!0),o(!1),p("/dashboards")):(l(!1),o(!0))},{register:Z,handleSubmit:_,formState:{errors:q}}=L(),ee={referralWallet:{required:"Referral wallet is required",pattern:{value:/^0x[a-fA-F0-9]{40}$/i,message:"Invalid Wallet Address"}}},se=async t=>{console.log(t),u(t.referralWallet),d(!1),o(!1),W()};return e.jsxs(M,{title:"Join and Activate",children:[e.jsx("div",{className:"transition-content w-full px-(--margin-x) pt-5 lg:pt-6",children:e.jsx(Y,{wait:500,children:k?e.jsx("div",{children:"Already Registered"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5 text-gray-100 dark:text-dark-100",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-500 to-primary-600 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium",children:" Register Your Account  "}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsxs("div",{className:"mt-4 text-s font-medium text-gray-100 dark:text-dark-100 ",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Info: "})," Register your wallet to join our community."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"About: "}),"You will create an account, network, and wallet."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Benefits: "}),"You will get the privillege to earn rewards by joining the programs."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Requirements: "}),"To register you need a wallet address and valid sponsor."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fees:"})," You need ",S," USDT and enough BNB balance for registrations."]})]})}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5"})]})}),e.jsx("div",{className:"card mt-5 mb-10 p-5",children:e.jsxs("form",{onSubmit:_(se),autoComplete:"off",children:[e.jsx("div",{className:"w-full mb-5",children:e.jsx(D,{name:"yourwalletaddress",label:"Your Wallet Address",placeholder:"Enter Wallet Address",value:A||"",description:"Your recognize wallet address.",onChange:t=>j(t.target.value),readOnly:!0})}),e.jsx("div",{className:"w-full mb-5",children:e.jsx(D,{name:"referralWallet",label:"Referral Wallet",placeholder:"Enter Wallet Address",description:"Referral Wallet Address.",onChange:t=>{u(t.target.value)},...Z("referralWallet",ee.referralWallet),error:q?.referralWallet&&q.referralWallet.message})}),e.jsx("div",{className:"mt-2",children:e.jsx(U,{when:f&&f?.message!=="",children:f})}),e.jsx("div",{className:"w-full",children:e.jsx(z,{type:"submit",className:"mt-5 w-full",color:"primary",children:"REGISTER"})})]})})]})})}),e.jsx(H,{show:c,onClose:F,messages:K,onOk:X,confirmLoading:R,state:V})]})}function me(){const p=O(),{address:a,brokerFee:x,WNTradesContract:n,activateBroker:h,convertWeiToEther:S}=$(),[m,E]=s.useState(""),[g,{open:C,close:T}]=P(!1),[k,i]=s.useState(!1),[A,j]=s.useState(!1),[v,u]=s.useState(!1),[f,y]=s.useState(!1),[c,W]=s.useState([]),F=v?"error":A?"success":"pending",R={pending:{Icon:G,title:" Send request ",description:"Click ok to confirm request.",actionText:"Ok"},success:{title:"Request Processing",description:"Activation Completed"},error:{description:`${f} Ensure internet is on and retry. Contact support if issue remains.`}};s.useEffect(()=>{async function r(){a!=="0x0000000000000000000000000000000000000000"&&n&&W(await n.brokers(a)),E(m),g==!1&&i(!1)}r()},[a,g,m,n]);const l=async()=>{i(!0);var r=!1;r=await h(),r||y("Failed to register"),r==!0?(y("Registered Complete"),i(!1),j(!0),u(!1),p("/dashboards/broker")):(i(!1),u(!0))},{register:I,handleSubmit:d,formState:{errors:b}}=L(),o=async()=>{console.log("on submit:"),j(!1),u(!1),C()},N={yourwalletaddress:{required:"Your wallet is required"}};return e.jsxs(M,{title:"Merchant Program",children:[e.jsxs("div",{className:"m-5",children:[e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Country Head"}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"Enjoy all deposits under your organizations"})})]})}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-2 sm:px-5",children:[e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Requirements"}),e.jsxs("div",{className:"flex items-end justify-between space-x-2 ",children:[e.jsxs("p",{className:"mt-4 text-s font-medium text-white",children:[S(x)," USDT"]}),e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"Rank 10"})]}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5",children:e.jsx("span",{className:"text-2xl",children:"1"})})]}),e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Country Head Incentives"}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"The country head will get 5% of the deposit and activation of accounts."})}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5",children:e.jsx("span",{className:"text-2xl",children:"2"})})]})]})]}),e.jsx("div",{className:"card mb-10 p-5",children:e.jsx(Y,{wait:2e3,children:c.isActive?e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"MERCHANT STATUS"}),e.jsxs("p",{className:"uppercase font-medium text-white",children:["Merchant Fees: ",parseFloat(c.fees)/100," %  "]}),e.jsxs("p",{className:"uppercase font-medium text-white",children:["Total Income: ",parseFloat(c.totalIncome)," "]})]})})}):e.jsxs("form",{onSubmit:d(o),autoComplete:"off",children:[e.jsx("div",{className:"w-full mb-5",children:e.jsx(D,{name:"yourwalletaddress",label:"Your Wallet Address!",placeholder:"Enter Wallet Address",value:a||"",description:"Your recognize wallet address.",readOnly:!0,...I("yourwalletaddress",N.yourwalletaddress),error:b?.yourwalletaddress&&b.yourwalletaddress.message})}),e.jsx("div",{className:"mt-2",children:e.jsx(U,{when:m&&m?.message!=="",children:m})}),e.jsx("div",{className:"w-full",children:e.jsxs(z,{type:"submit",className:"mt-5 w-full",color:"primary",children:["ACTIVATE [",c.fees,"]"]})})]})})}),e.jsx(H,{show:g,onClose:T,messages:R,onOk:l,confirmLoading:k,state:F})]})}export{me as Broker,de as default};
