import{a as s,P as Y,e as D,f as B,j as e,I as F,k as P,B as z}from"./index-DjhRoM_7.js";import{P as M}from"./Page-DFHq6O61.js";import{u as L}from"./useSmartContract-DYLPeltI.js";import{u as H}from"./index.esm-GLXOSNOA.js";import{C as U}from"./ConfirmModal-BKL9hJZg.js";import{F as $}from"./ExclamationTriangleIcon-CNm6Yb1E.js";import"./transition-DN3NeaFj.js";import"./dialog-C10d_ctE.js";function q({children:d,wait:r=300}){const[m,l]=s.useState(!1);if(s.useEffect(()=>{const p=setTimeout(()=>{l(!0)},r);return()=>clearTimeout(p)},[r]),!d)throw new Error("No children provided");return m?d:null}q.propTypes={children:Y.node,wait:Y.number};function ae(){const d=D(),{address:r,affiliateData:m,registrationFee:l,lastCallTime:p,registerWallet:C}=L();console.log(m.parent);const i=m.parent!="0x0000000000000000000000000000000000000000",[k,u]=s.useState(r),[h,g]=s.useState(""),[o,f]=s.useState(""),[j,{open:y,close:T}]=B(!1),[w,n]=s.useState(!1),[N,a]=s.useState(!1),[A,x]=s.useState(!1),[b,S]=s.useState(!1),[v,W]=s.useState("register"),E=A?"error":N?"success":"pending",R={pending:{Icon:$,title:" Send request ",description:"Click ok to confirm request.",actionText:"Ok"},success:{title:"Request Processing",description:"Activation Completed"},error:{description:b.length>0?`${b}`:"Ensure internet is on and retry. Contact support if issue remains."}};s.useEffect(()=>{async function t(){u(r),g(h),f(o),W(v),j==!1&&n(!1)}t()},[j,r,v,o,h]);var I=Math.floor(Date.now()/1e3);const c=async()=>{if(n(!0),I<parseInt(p)+60){S("60 Seconds CoolDown. Try Again Later"),n(!1),a(!1),x(!0);return}var t=!1;v=="register"&&(t=await C(h),t||S("Failed to register")),t==!0?(n(!1),a(!0),x(!1),d("/dashboards")):(n(!1),x(!0))},{register:G,handleSubmit:J,formState:{errors:O}}=H(),V={referralWallet:{required:"Referral wallet is required",pattern:{value:/^0x[a-fA-F0-9]{40}$/i,message:"Invalid Wallet Address"}}},K=async t=>{console.log(t),g(t.referralWallet),a(!1),x(!1),y()};return e.jsxs(M,{title:"Join and Activate",children:[e.jsx("div",{className:"transition-content w-full px-(--margin-x) pt-5 lg:pt-6",children:e.jsx(q,{wait:500,children:i?e.jsx("div",{children:"Already Registered"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5 text-gray-100 dark:text-dark-100",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-500 to-primary-600 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium",children:" Register Your Account  "}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsxs("div",{className:"mt-4 text-s font-medium text-gray-100 dark:text-dark-100 ",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Info: "})," Register your wallet to join our community."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"About: "}),"You will create an account, network, and wallet."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Benefits: "}),"You will get the privillege to earn rewards by joining the programs."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Requirements: "}),"To register you need a wallet address and valid sponsor."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fees:"})," You need ",l," USDT and enough BNB balance for registrations."]})]})}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5"})]})}),e.jsx("div",{className:"card mt-5 mb-10 p-5",children:e.jsxs("form",{onSubmit:J(K),autoComplete:"off",children:[e.jsx("div",{className:"w-full mb-5",children:e.jsx(F,{name:"yourwalletaddress",label:"Your Wallet Address",placeholder:"Enter Wallet Address",value:k||"",description:"Your recognize wallet address.",onChange:t=>u(t.target.value),readOnly:!0})}),e.jsx("div",{className:"w-full mb-5",children:e.jsx(F,{name:"referralWallet",label:"Referral Wallet",placeholder:"Enter Wallet Address",description:"Referral Wallet Address.",onChange:t=>{g(t.target.value)},...G("referralWallet",V.referralWallet),error:O?.referralWallet&&O.referralWallet.message})}),e.jsx("div",{className:"mt-2",children:e.jsx(P,{when:o&&o?.message!=="",children:o})}),e.jsx("div",{className:"w-full",children:e.jsx(z,{type:"submit",className:"mt-5 w-full",color:"primary",children:"REGISTER"})})]})})]})})}),e.jsx(U,{show:j,onClose:T,messages:R,onOk:c,confirmLoading:w,state:E})]})}function le(){const d=D(),{address:r,brokerFee:m,WNTradesContract:l,activateBroker:p,convertWeiToEther:C}=L(),[i,k]=s.useState(""),[u,{open:h,close:g}]=B(!1),[o,f]=s.useState(!1),[j,y]=s.useState(!1),[T,w]=s.useState(!1),[n,N]=s.useState(!1),[a,A]=s.useState([]),x=T?"error":j?"success":"pending",b={pending:{Icon:$,title:" Send request ",description:"Click ok to confirm request.",actionText:"Ok"},success:{title:"Request Processing",description:"Activation Completed"},error:{description:`${n} Ensure internet is on and retry. Contact support if issue remains.`}};s.useEffect(()=>{async function c(){r!=="0x0000000000000000000000000000000000000000"&&l&&A(await l.brokers(r)),k(i),u==!1&&f(!1)}c()},[r,u,i,l]);const S=async()=>{f(!0);var c=!1;c=await p(),c||N("Failed to register"),c==!0?(N("Registered Complete"),f(!1),y(!0),w(!1),d("/dashboards/broker")):(f(!1),w(!0))},{register:v,handleSubmit:W,formState:{errors:E}}=H(),R=async()=>{console.log("on submit:"),y(!1),w(!1),h()},I={yourwalletaddress:{required:"Your wallet is required"}};return e.jsxs(M,{title:"Merchant Program",children:[e.jsxs("div",{className:"m-5",children:[e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Country Head"}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"Enjoy all deposits under your organizations"})})]})}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-2 sm:px-5",children:[e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Requirements"}),e.jsxs("div",{className:"flex items-end justify-between space-x-2 ",children:[e.jsxs("p",{className:"mt-4 text-s font-medium text-white",children:[C(m)," USDT"]}),e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"Rank 10"})]}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5",children:e.jsx("span",{className:"text-2xl",children:"1"})})]}),e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"Country Head Incentives"}),e.jsx("div",{className:"flex items-end justify-between space-x-2 ",children:e.jsx("p",{className:"mt-4 text-s font-medium text-white",children:"The country head will get 5% of the deposit and activation of accounts."})}),e.jsx("div",{className:"mask is-hexagon-2 absolute right-0 top-0 -m-3 size-16 bg-white/20 text-center p-5",children:e.jsx("span",{className:"text-2xl",children:"2"})})]})]})]}),e.jsx("div",{className:"card mb-10 p-5",children:e.jsx(q,{wait:2e3,children:a.isActive?e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"mt-5 grid grid-cols-1 gap-4 px-4 sm:grid-cols-1 sm:px-5",children:e.jsxs("div",{className:"relative flex flex-col overflow-hidden rounded-lg bg-linear-to-br from-primary-400 to-primary-800 p-3.5",children:[e.jsx("p",{className:"text-xl uppercase font-medium text-white",children:"MERCHANT STATUS"}),e.jsxs("p",{className:"uppercase font-medium text-white",children:["Merchant Fees: ",parseFloat(a.fees)/100," %  "]}),e.jsxs("p",{className:"uppercase font-medium text-white",children:["Total Income: ",parseFloat(a.totalIncome)," "]})]})})}):e.jsxs("form",{onSubmit:W(R),autoComplete:"off",children:[e.jsx("div",{className:"w-full mb-5",children:e.jsx(F,{name:"yourwalletaddress",label:"Your Wallet Address!",placeholder:"Enter Wallet Address",value:r||"",description:"Your recognize wallet address.",readOnly:!0,...v("yourwalletaddress",I.yourwalletaddress),error:E?.yourwalletaddress&&E.yourwalletaddress.message})}),e.jsx("div",{className:"mt-2",children:e.jsx(P,{when:i&&i?.message!=="",children:i})}),e.jsx("div",{className:"w-full",children:e.jsxs(z,{type:"submit",className:"mt-5 w-full",color:"primary",children:["ACTIVATE [",a.fees,"]"]})})]})})}),e.jsx(U,{show:u,onClose:g,messages:b,onOk:S,confirmLoading:o,state:x})]})}export{le as Broker,ae as default};
