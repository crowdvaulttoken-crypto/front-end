import{h as y,a as s,e as I,j as e,I as T,B as $,k as B}from"./index-B6VG0hLA.js";import{P as O}from"./Page-CQkXL6xy.js";import{u as R}from"./useSmartContract-C-QDBB2P.js";import{u as W}from"./index.esm-C9nAt_co.js";import{C as M}from"./ConfirmModal-sk8L8KOx.js";import{F as P}from"./ExclamationTriangleIcon-CuEpZ3Be.js";import"./transition-07TcQCha.js";import"./dialog-9rb7ewgr.js";function K(){const m=y(),{walletData:u,withdraw:d}=R(),[f,p]=s.useState(0),[r,h]=s.useState(0),[x,{open:w,close:g}]=I(!1),[j,n]=s.useState(!1),[S,c]=s.useState(!1),[b,i]=s.useState(!1),[k,o]=s.useState(""),q=b?"error":S?"success":"pending",v={pending:{Icon:P,title:"Deposit Call",description:"Click ok to confirm request.",actionText:"Ok"},success:{title:"Request Processing",description:"Thank You."},error:{description:`${k}`}},A=async()=>{n(!0);var t=!1,F=Math.floor(Date.now()/1e3);parseInt(u.coolDown)+86400>F?o("24 hrs withdrawal cooldown!"):r<5||r>100?o(`Widrawal Range Error ${r}`):f<r?o("Not enough rewards balance"):(t=await d(r),t||o("Transfer Failed")),t==!0?(n(!1),c(!0),i(!1),m("/dashboards")):(n(!1),i(!0))},E=t=>{console.log(t),p(parseFloat(u.balance)),h(parseFloat(t.requestAmount)),c(!1),i(!1),w()},{register:D,handleSubmit:C,formState:{errors:a}}=W(),l=10,N={requestAmount:{required:"Enter Amount",min:{value:`${l}`,message:`Value must not less than ${l}`}}};return e.jsxs(O,{title:"Withdraw",children:[e.jsxs("div",{className:"transition-content w-full px-(--margin-x) pt-5 lg:pt-6",children:[e.jsx("div",{className:"min-w-0 mb-10",children:e.jsx("h2",{className:"truncate text-xl font-medium tracking-wide text-gray-800 dark:text-dark-50",children:"Deposit"})}),e.jsxs("form",{onSubmit:C(E),children:[e.jsxs("label",{htmlFor:"requestAmount",children:["Enter the minimum amount ",l," USDT"]}),e.jsxs("div",{className:"mt-1.5 flex -space-x-px ",children:[e.jsx(T,{placeholder:"Enter amount",classNames:{root:"flex-1",input:"relative hover:z-1 focus:z-1 ltr:rounded-r-none rtl:rounded-l-none"},prefix:"$",type:"number",...D("requestAmount",N.requestAmount)}),e.jsx($,{color:"primary",className:"ltr:rounded-l-none rtl:rounded-r-none",type:"submit",children:"Deposit"})]}),e.jsx(B,{when:a&&a?.message!=="",children:a?.requestAmount&&a.requestAmount.message})]})]}),e.jsx(M,{show:x,onClose:g,messages:v,onOk:A,confirmLoading:j,state:q})]})}export{K as default};
